{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":40,"index":119}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":26,"index":146}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":147},"end":{"line":4,"column":39,"index":186}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SubscriptionContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.SubscriptionProvider = SubscriptionProvider;\n  exports.useSubscription = useSubscription;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _AuthContext = require(_dependencyMap[2], \"./AuthContext\");\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  const API_BASE_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://vamos-comecar-2.preview.emergentagent.com';\n  const SubscriptionContext = /*#__PURE__*/(0, _react.createContext)({});\n  function SubscriptionProvider({\n    children\n  }) {\n    _s();\n    const {\n      user,\n      token\n    } = (0, _AuthContext.useAuth)();\n    const [subscriptionStatus, setSubscriptionStatus] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(false);\n\n    // Fetch real subscription status from API\n    (0, _react.useEffect)(() => {\n      if (user) {\n        refreshSubscription();\n      } else {\n        setSubscriptionStatus(null);\n      }\n    }, [user]);\n    async function refreshSubscription() {\n      if (!user || !token) return;\n      try {\n        setLoading(true);\n        const response = await axios.default.get(`${API_BASE_URL}/api/subscription/status`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        setSubscriptionStatus(response.data);\n      } catch (error) {\n        console.error('Error fetching subscription status:', error);\n        // If error, assume no subscription\n        setSubscriptionStatus({\n          has_subscription: false,\n          status: 'none',\n          days_remaining: 0,\n          is_trial: false,\n          plan_name: null\n        });\n      } finally {\n        setLoading(false);\n      }\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SubscriptionContext.Provider, {\n      value: {\n        subscriptionStatus,\n        loading,\n        refreshSubscription\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this);\n  }\n  _s(SubscriptionProvider, \"HYE2K7K5AFXV8qU403PeDLVL0iE=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = SubscriptionProvider;\n  function useSubscription() {\n    _s2();\n    const context = (0, _react.useContext)(SubscriptionContext);\n    if (!context) {\n      throw new Error('useSubscription must be used within a SubscriptionProvider');\n    }\n    return context;\n  }\n  _s2(useSubscription, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"SubscriptionProvider\");\n});","lineCount":98,"map":[[15,2,24,0,"exports"],[15,9,24,0],[15,10,24,0,"SubscriptionProvider"],[15,30,24,0],[15,33,24,0,"SubscriptionProvider"],[15,53,24,0],[16,2,77,0,"exports"],[16,9,77,0],[16,10,77,0,"useSubscription"],[16,25,77,0],[16,28,77,0,"useSubscription"],[16,43,77,0],[17,2,83,1],[17,6,83,1,"_expoVirtualEnv"],[17,21,83,1],[17,24,83,1,"require"],[17,31,83,1],[17,32,83,1,"_dependencyMap"],[17,46,83,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_AuthContext"],[19,18,2,0],[19,21,2,0,"require"],[19,28,2,0],[19,29,2,0,"_dependencyMap"],[19,43,2,0],[20,2,3,0],[20,6,3,0,"_axios"],[20,12,3,0],[20,15,3,0,"require"],[20,22,3,0],[20,23,3,0,"_dependencyMap"],[20,37,3,0],[21,2,3,0],[21,6,3,0,"axios"],[21,11,3,0],[21,14,3,0,"_interopDefault"],[21,29,3,0],[21,30,3,0,"_axios"],[21,36,3,0],[22,2,4,0],[22,6,4,0,"_expoConstants"],[22,20,4,0],[22,23,4,0,"require"],[22,30,4,0],[22,31,4,0,"_dependencyMap"],[22,45,4,0],[23,2,4,0],[23,6,4,0,"Constants"],[23,15,4,0],[23,18,4,0,"_interopDefault"],[23,33,4,0],[23,34,4,0,"_expoConstants"],[23,48,4,0],[24,2,4,39],[24,6,4,39,"_reactJsxDevRuntime"],[24,25,4,39],[24,28,4,39,"require"],[24,35,4,39],[24,36,4,39,"_dependencyMap"],[24,50,4,39],[25,2,6,0],[25,8,6,6,"API_BASE_URL"],[25,20,6,18],[25,23,6,21,"Constants"],[25,32,6,30],[25,33,6,30,"default"],[25,40,6,30],[25,41,6,31,"expoConfig"],[25,51,6,41],[25,53,6,43,"extra"],[25,58,6,48],[25,60,6,50,"EXPO_PUBLIC_BACKEND_URL"],[25,83,6,73],[25,87,6,73,"_expoVirtualEnv"],[25,102,6,73],[25,103,6,73,"env"],[25,106,6,73],[25,107,6,73,"EXPO_PUBLIC_BACKEND_URL"],[25,130,6,112],[25,134,6,116],[25,185,6,167],[26,2,22,0],[26,8,22,6,"SubscriptionContext"],[26,27,22,25],[26,43,22,28],[26,47,22,28,"createContext"],[26,53,22,41],[26,54,22,41,"createContext"],[26,67,22,41],[26,69,22,67],[26,70,22,68],[26,71,22,96],[26,72,22,97],[27,2,24,7],[27,11,24,16,"SubscriptionProvider"],[27,31,24,36,"SubscriptionProvider"],[27,32,24,37],[28,4,24,39,"children"],[29,2,24,79],[29,3,24,80],[29,5,24,82],[30,4,24,82,"_s"],[30,6,24,82],[31,4,25,2],[31,10,25,8],[32,6,25,10,"user"],[32,10,25,14],[33,6,25,16,"token"],[34,4,25,22],[34,5,25,23],[34,8,25,26],[34,12,25,26,"useAuth"],[34,24,25,33],[34,25,25,33,"useAuth"],[34,32,25,33],[34,34,25,34],[34,35,25,35],[35,4,26,2],[35,10,26,8],[35,11,26,9,"subscriptionStatus"],[35,29,26,27],[35,31,26,29,"setSubscriptionStatus"],[35,52,26,50],[35,53,26,51],[35,56,26,54],[35,60,26,54,"useState"],[35,66,26,62],[35,67,26,62,"useState"],[35,75,26,62],[35,77,26,90],[35,81,26,94],[35,82,26,95],[36,4,27,2],[36,10,27,8],[36,11,27,9,"loading"],[36,18,27,16],[36,20,27,18,"setLoading"],[36,30,27,28],[36,31,27,29],[36,34,27,32],[36,38,27,32,"useState"],[36,44,27,40],[36,45,27,40,"useState"],[36,53,27,40],[36,55,27,41],[36,60,27,46],[36,61,27,47],[38,4,29,2],[39,4,30,2],[39,8,30,2,"useEffect"],[39,14,30,11],[39,15,30,11,"useEffect"],[39,24,30,11],[39,26,30,12],[39,32,30,18],[40,6,31,4],[40,10,31,8,"user"],[40,14,31,12],[40,16,31,14],[41,8,32,6,"refreshSubscription"],[41,27,32,25],[41,28,32,26],[41,29,32,27],[42,6,33,4],[42,7,33,5],[42,13,33,11],[43,8,34,6,"setSubscriptionStatus"],[43,29,34,27],[43,30,34,28],[43,34,34,32],[43,35,34,33],[44,6,35,4],[45,4,36,2],[45,5,36,3],[45,7,36,5],[45,8,36,6,"user"],[45,12,36,10],[45,13,36,11],[45,14,36,12],[46,4,38,2],[46,19,38,17,"refreshSubscription"],[46,38,38,36,"refreshSubscription"],[46,39,38,36],[46,41,38,39],[47,6,39,4],[47,10,39,8],[47,11,39,9,"user"],[47,15,39,13],[47,19,39,17],[47,20,39,18,"token"],[47,25,39,23],[47,27,39,25],[48,6,41,4],[48,10,41,8],[49,8,42,6,"setLoading"],[49,18,42,16],[49,19,42,17],[49,23,42,21],[49,24,42,22],[50,8,43,6],[50,14,43,12,"response"],[50,22,43,20],[50,25,43,23],[50,31,43,29,"axios"],[50,36,43,34],[50,37,43,34,"default"],[50,44,43,34],[50,45,43,35,"get"],[50,48,43,38],[50,49,43,39],[50,52,43,42,"API_BASE_URL"],[50,64,43,54],[50,90,43,80],[50,92,43,82],[51,10,44,8,"headers"],[51,17,44,15],[51,19,44,17],[52,12,45,10],[52,27,45,25],[52,29,45,27],[52,39,45,37,"token"],[52,44,45,42],[53,10,46,8],[54,8,47,6],[54,9,47,7],[54,10,47,8],[55,8,48,6,"setSubscriptionStatus"],[55,29,48,27],[55,30,48,28,"response"],[55,38,48,36],[55,39,48,37,"data"],[55,43,48,41],[55,44,48,42],[56,6,49,4],[56,7,49,5],[56,8,49,6],[56,15,49,13,"error"],[56,20,49,18],[56,22,49,20],[57,8,50,6,"console"],[57,15,50,13],[57,16,50,14,"error"],[57,21,50,19],[57,22,50,20],[57,59,50,57],[57,61,50,59,"error"],[57,66,50,64],[57,67,50,65],[58,8,51,6],[59,8,52,6,"setSubscriptionStatus"],[59,29,52,27],[59,30,52,28],[60,10,53,8,"has_subscription"],[60,26,53,24],[60,28,53,26],[60,33,53,31],[61,10,54,8,"status"],[61,16,54,14],[61,18,54,16],[61,24,54,22],[62,10,55,8,"days_remaining"],[62,24,55,22],[62,26,55,24],[62,27,55,25],[63,10,56,8,"is_trial"],[63,18,56,16],[63,20,56,18],[63,25,56,23],[64,10,57,8,"plan_name"],[64,19,57,17],[64,21,57,19],[65,8,58,6],[65,9,58,7],[65,10,58,8],[66,6,59,4],[66,7,59,5],[66,16,59,14],[67,8,60,6,"setLoading"],[67,18,60,16],[67,19,60,17],[67,24,60,22],[67,25,60,23],[68,6,61,4],[69,4,62,2],[70,4,64,2],[70,24,65,4],[70,28,65,4,"_reactJsxDevRuntime"],[70,47,65,4],[70,48,65,4,"jsxDEV"],[70,54,65,4],[70,56,65,5,"SubscriptionContext"],[70,75,65,24],[70,76,65,25,"Provider"],[70,84,65,33],[71,6,66,6,"value"],[71,11,66,11],[71,13,66,13],[72,8,67,8,"subscriptionStatus"],[72,26,67,26],[73,8,68,8,"loading"],[73,15,68,15],[74,8,69,8,"refreshSubscription"],[75,6,70,6],[75,7,70,8],[76,6,70,8,"children"],[76,14,70,8],[76,16,72,7,"children"],[77,4,72,15],[78,6,72,15,"fileName"],[78,14,72,15],[78,16,72,15,"_jsxFileName"],[78,28,72,15],[79,6,72,15,"lineNumber"],[79,16,72,15],[80,6,72,15,"columnNumber"],[80,18,72,15],[81,4,72,15],[81,11,73,34],[81,12,73,35],[82,2,75,0],[83,2,75,1,"_s"],[83,4,75,1],[83,5,24,16,"SubscriptionProvider"],[83,25,24,36],[84,4,24,36],[84,12,25,26,"useAuth"],[84,24,25,33],[84,25,25,33,"useAuth"],[84,32,25,33],[85,2,25,33],[86,2,25,33,"_c"],[86,4,25,33],[86,7,24,16,"SubscriptionProvider"],[86,27,24,36],[87,2,77,7],[87,11,77,16,"useSubscription"],[87,26,77,31,"useSubscription"],[87,27,77,31],[87,29,77,34],[88,4,77,34,"_s2"],[88,7,77,34],[89,4,78,2],[89,10,78,8,"context"],[89,17,78,15],[89,20,78,18],[89,24,78,18,"useContext"],[89,30,78,28],[89,31,78,28,"useContext"],[89,41,78,28],[89,43,78,29,"SubscriptionContext"],[89,62,78,48],[89,63,78,49],[90,4,79,2],[90,8,79,6],[90,9,79,7,"context"],[90,16,79,14],[90,18,79,16],[91,6,80,4],[91,12,80,10],[91,16,80,14,"Error"],[91,21,80,19],[91,22,80,20],[91,82,80,80],[91,83,80,81],[92,4,81,2],[93,4,82,2],[93,11,82,9,"context"],[93,18,82,16],[94,2,83,0],[95,2,83,1,"_s2"],[95,5,83,1],[95,6,77,16,"useSubscription"],[95,21,77,31],[96,2,77,31],[96,6,77,31,"_c"],[96,8,77,31],[97,2,77,31,"$RefreshReg$"],[97,14,77,31],[97,15,77,31,"_c"],[97,17,77,31],[98,0,77,31],[98,3]],"functionMap":{"names":["<global>","SubscriptionProvider","useEffect$argument_0","refreshSubscription","useSubscription"],"mappings":"AAA;OCuB;YCM;GDM;EEE;GFwB;CDa;OIE;CJM"},"hasCjsExports":false},"type":"js/module"}]}