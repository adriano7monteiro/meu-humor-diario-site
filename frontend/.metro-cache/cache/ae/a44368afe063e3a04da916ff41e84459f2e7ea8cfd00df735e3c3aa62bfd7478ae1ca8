{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":40,"index":119}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":26,"index":146}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":147},"end":{"line":4,"column":39,"index":186}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SubscriptionContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.SubscriptionProvider = SubscriptionProvider;\n  exports.useSubscription = useSubscription;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _AuthContext = require(_dependencyMap[1], \"./AuthContext\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_BASE_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL || 'https://vamos-comecar-2.preview.emergentagent.com';\n  const SubscriptionContext = /*#__PURE__*/(0, _react.createContext)({});\n  function SubscriptionProvider({\n    children\n  }) {\n    const {\n      user,\n      token\n    } = (0, _AuthContext.useAuth)();\n    const [subscriptionStatus, setSubscriptionStatus] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(false);\n\n    // Fetch real subscription status from API\n    (0, _react.useEffect)(() => {\n      if (user) {\n        refreshSubscription();\n      } else {\n        setSubscriptionStatus(null);\n      }\n    }, [user]);\n    async function refreshSubscription() {\n      if (!user || !token) return;\n      try {\n        setLoading(true);\n        const response = await axios.default.get(`${API_BASE_URL}/api/subscription/status`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        setSubscriptionStatus(response.data);\n      } catch (error) {\n        console.error('Error fetching subscription status:', error);\n        // If error, assume no subscription\n        setSubscriptionStatus({\n          has_subscription: false,\n          status: 'none',\n          days_remaining: 0,\n          is_trial: false,\n          plan_name: null\n        });\n      } finally {\n        setLoading(false);\n      }\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SubscriptionContext.Provider, {\n      value: {\n        subscriptionStatus,\n        loading,\n        refreshSubscription\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this);\n  }\n  function useSubscription() {\n    const context = (0, _react.useContext)(SubscriptionContext);\n    if (!context) {\n      throw new Error('useSubscription must be used within a SubscriptionProvider');\n    }\n    return context;\n  }\n});","lineCount":86,"map":[[13,2,24,0,"exports"],[13,9,24,0],[13,10,24,0,"SubscriptionProvider"],[13,30,24,0],[13,33,24,0,"SubscriptionProvider"],[13,53,24,0],[14,2,77,0,"exports"],[14,9,77,0],[14,10,77,0,"useSubscription"],[14,25,77,0],[14,28,77,0,"useSubscription"],[14,43,77,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_AuthContext"],[16,18,2,0],[16,21,2,0,"require"],[16,28,2,0],[16,29,2,0,"_dependencyMap"],[16,43,2,0],[17,2,3,0],[17,6,3,0,"_axios"],[17,12,3,0],[17,15,3,0,"require"],[17,22,3,0],[17,23,3,0,"_dependencyMap"],[17,37,3,0],[18,2,3,0],[18,6,3,0,"axios"],[18,11,3,0],[18,14,3,0,"_interopDefault"],[18,29,3,0],[18,30,3,0,"_axios"],[18,36,3,0],[19,2,4,0],[19,6,4,0,"_expoConstants"],[19,20,4,0],[19,23,4,0,"require"],[19,30,4,0],[19,31,4,0,"_dependencyMap"],[19,45,4,0],[20,2,4,0],[20,6,4,0,"Constants"],[20,15,4,0],[20,18,4,0,"_interopDefault"],[20,33,4,0],[20,34,4,0,"_expoConstants"],[20,48,4,0],[21,2,4,39],[21,6,4,39,"_reactJsxDevRuntime"],[21,25,4,39],[21,28,4,39,"require"],[21,35,4,39],[21,36,4,39,"_dependencyMap"],[21,50,4,39],[22,2,6,0],[22,8,6,6,"API_BASE_URL"],[22,20,6,18],[22,23,6,21,"Constants"],[22,32,6,30],[22,33,6,30,"default"],[22,40,6,30],[22,41,6,31,"expoConfig"],[22,51,6,41],[22,53,6,43,"extra"],[22,58,6,48],[22,60,6,50,"EXPO_PUBLIC_BACKEND_URL"],[22,83,6,73],[22,87,6,77,"process"],[22,94,6,84],[22,95,6,85,"env"],[22,98,6,88],[22,99,6,89,"EXPO_PUBLIC_BACKEND_URL"],[22,122,6,112],[22,126,6,116],[22,177,6,167],[23,2,22,0],[23,8,22,6,"SubscriptionContext"],[23,27,22,25],[23,43,22,28],[23,47,22,28,"createContext"],[23,53,22,41],[23,54,22,41,"createContext"],[23,67,22,41],[23,69,22,67],[23,70,22,68],[23,71,22,96],[23,72,22,97],[24,2,24,7],[24,11,24,16,"SubscriptionProvider"],[24,31,24,36,"SubscriptionProvider"],[24,32,24,37],[25,4,24,39,"children"],[26,2,24,79],[26,3,24,80],[26,5,24,82],[27,4,25,2],[27,10,25,8],[28,6,25,10,"user"],[28,10,25,14],[29,6,25,16,"token"],[30,4,25,22],[30,5,25,23],[30,8,25,26],[30,12,25,26,"useAuth"],[30,24,25,33],[30,25,25,33,"useAuth"],[30,32,25,33],[30,34,25,34],[30,35,25,35],[31,4,26,2],[31,10,26,8],[31,11,26,9,"subscriptionStatus"],[31,29,26,27],[31,31,26,29,"setSubscriptionStatus"],[31,52,26,50],[31,53,26,51],[31,56,26,54],[31,60,26,54,"useState"],[31,66,26,62],[31,67,26,62,"useState"],[31,75,26,62],[31,77,26,90],[31,81,26,94],[31,82,26,95],[32,4,27,2],[32,10,27,8],[32,11,27,9,"loading"],[32,18,27,16],[32,20,27,18,"setLoading"],[32,30,27,28],[32,31,27,29],[32,34,27,32],[32,38,27,32,"useState"],[32,44,27,40],[32,45,27,40,"useState"],[32,53,27,40],[32,55,27,41],[32,60,27,46],[32,61,27,47],[34,4,29,2],[35,4,30,2],[35,8,30,2,"useEffect"],[35,14,30,11],[35,15,30,11,"useEffect"],[35,24,30,11],[35,26,30,12],[35,32,30,18],[36,6,31,4],[36,10,31,8,"user"],[36,14,31,12],[36,16,31,14],[37,8,32,6,"refreshSubscription"],[37,27,32,25],[37,28,32,26],[37,29,32,27],[38,6,33,4],[38,7,33,5],[38,13,33,11],[39,8,34,6,"setSubscriptionStatus"],[39,29,34,27],[39,30,34,28],[39,34,34,32],[39,35,34,33],[40,6,35,4],[41,4,36,2],[41,5,36,3],[41,7,36,5],[41,8,36,6,"user"],[41,12,36,10],[41,13,36,11],[41,14,36,12],[42,4,38,2],[42,19,38,17,"refreshSubscription"],[42,38,38,36,"refreshSubscription"],[42,39,38,36],[42,41,38,39],[43,6,39,4],[43,10,39,8],[43,11,39,9,"user"],[43,15,39,13],[43,19,39,17],[43,20,39,18,"token"],[43,25,39,23],[43,27,39,25],[44,6,41,4],[44,10,41,8],[45,8,42,6,"setLoading"],[45,18,42,16],[45,19,42,17],[45,23,42,21],[45,24,42,22],[46,8,43,6],[46,14,43,12,"response"],[46,22,43,20],[46,25,43,23],[46,31,43,29,"axios"],[46,36,43,34],[46,37,43,34,"default"],[46,44,43,34],[46,45,43,35,"get"],[46,48,43,38],[46,49,43,39],[46,52,43,42,"API_BASE_URL"],[46,64,43,54],[46,90,43,80],[46,92,43,82],[47,10,44,8,"headers"],[47,17,44,15],[47,19,44,17],[48,12,45,10],[48,27,45,25],[48,29,45,27],[48,39,45,37,"token"],[48,44,45,42],[49,10,46,8],[50,8,47,6],[50,9,47,7],[50,10,47,8],[51,8,48,6,"setSubscriptionStatus"],[51,29,48,27],[51,30,48,28,"response"],[51,38,48,36],[51,39,48,37,"data"],[51,43,48,41],[51,44,48,42],[52,6,49,4],[52,7,49,5],[52,8,49,6],[52,15,49,13,"error"],[52,20,49,18],[52,22,49,20],[53,8,50,6,"console"],[53,15,50,13],[53,16,50,14,"error"],[53,21,50,19],[53,22,50,20],[53,59,50,57],[53,61,50,59,"error"],[53,66,50,64],[53,67,50,65],[54,8,51,6],[55,8,52,6,"setSubscriptionStatus"],[55,29,52,27],[55,30,52,28],[56,10,53,8,"has_subscription"],[56,26,53,24],[56,28,53,26],[56,33,53,31],[57,10,54,8,"status"],[57,16,54,14],[57,18,54,16],[57,24,54,22],[58,10,55,8,"days_remaining"],[58,24,55,22],[58,26,55,24],[58,27,55,25],[59,10,56,8,"is_trial"],[59,18,56,16],[59,20,56,18],[59,25,56,23],[60,10,57,8,"plan_name"],[60,19,57,17],[60,21,57,19],[61,8,58,6],[61,9,58,7],[61,10,58,8],[62,6,59,4],[62,7,59,5],[62,16,59,14],[63,8,60,6,"setLoading"],[63,18,60,16],[63,19,60,17],[63,24,60,22],[63,25,60,23],[64,6,61,4],[65,4,62,2],[66,4,64,2],[66,24,65,4],[66,28,65,4,"_reactJsxDevRuntime"],[66,47,65,4],[66,48,65,4,"jsxDEV"],[66,54,65,4],[66,56,65,5,"SubscriptionContext"],[66,75,65,24],[66,76,65,25,"Provider"],[66,84,65,33],[67,6,66,6,"value"],[67,11,66,11],[67,13,66,13],[68,8,67,8,"subscriptionStatus"],[68,26,67,26],[69,8,68,8,"loading"],[69,15,68,15],[70,8,69,8,"refreshSubscription"],[71,6,70,6],[71,7,70,8],[72,6,70,8,"children"],[72,14,70,8],[72,16,72,7,"children"],[73,4,72,15],[74,6,72,15,"fileName"],[74,14,72,15],[74,16,72,15,"_jsxFileName"],[74,28,72,15],[75,6,72,15,"lineNumber"],[75,16,72,15],[76,6,72,15,"columnNumber"],[76,18,72,15],[77,4,72,15],[77,11,73,34],[77,12,73,35],[78,2,75,0],[79,2,77,7],[79,11,77,16,"useSubscription"],[79,26,77,31,"useSubscription"],[79,27,77,31],[79,29,77,34],[80,4,78,2],[80,10,78,8,"context"],[80,17,78,15],[80,20,78,18],[80,24,78,18,"useContext"],[80,30,78,28],[80,31,78,28,"useContext"],[80,41,78,28],[80,43,78,29,"SubscriptionContext"],[80,62,78,48],[80,63,78,49],[81,4,79,2],[81,8,79,6],[81,9,79,7,"context"],[81,16,79,14],[81,18,79,16],[82,6,80,4],[82,12,80,10],[82,16,80,14,"Error"],[82,21,80,19],[82,22,80,20],[82,82,80,80],[82,83,80,81],[83,4,81,2],[84,4,82,2],[84,11,82,9,"context"],[84,18,82,16],[85,2,83,0],[86,0,83,1],[86,3]],"functionMap":{"names":["<global>","SubscriptionProvider","useEffect$argument_0","refreshSubscription","useSubscription"],"mappings":"AAA;OCuB;YCM;GDM;EEE;GFwB;CDa;OIE;CJM"},"hasCjsExports":false},"type":"js/module"}]}